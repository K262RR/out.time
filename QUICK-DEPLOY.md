# üöÄ –ë—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π Out Time –Ω–∞ ISPmanager

## 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
```bash
# –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
pnpm run build:deploy
```

## 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ ISPmanager

### 2.1 –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–º–µ–Ω–∞
- –í–æ–π–¥–∏—Ç–µ –≤ ISPmanager
- –°–æ–∑–¥–∞–π—Ç–µ –¥–æ–º–µ–Ω/–ø–æ–¥–¥–æ–º–µ–Ω
- –í–∫–ª—é—á–∏—Ç–µ Node.js –ø–æ–¥–¥–µ—Ä–∂–∫—É

### 2.2 –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- –°–æ–∑–¥–∞–π—Ç–µ PostgreSQL –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- –ó–∞–ø–∏—à–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### 2.3 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSL/HTTPS

#### 2.3.1 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Certbot
```bash
# Ubuntu/Debian
sudo apt update
sudo apt install -y certbot python3-certbot-nginx

# CentOS/RHEL
sudo dnf install -y certbot python3-certbot-nginx

# macOS
brew install certbot
```

#### 2.3.2 –ü–æ–ª—É—á–µ–Ω–∏–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
```bash
# –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π nginx
sudo certbot --nginx -d your-domain.com

# –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–æ–º–µ–Ω—ã
sudo certbot --nginx -d your-domain.com -d www.your-domain.com -d api.your-domain.com
```

#### 2.3.3 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
sudo systemctl status certbot.timer

# –¢–µ—Å—Ç–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (dry-run)
sudo certbot renew --dry-run

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–µ—Å–ª–∏ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)
sudo systemctl enable certbot.timer
sudo systemctl start certbot.timer
```

#### 2.3.4 –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ nginx
sudo nginx -t

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ nginx –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
sudo systemctl restart nginx

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
sudo systemctl status nginx
```

#### 2.3.5 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞ –∏–∑ –ø—Ä–∏–º–µ—Ä–∞
cp env.production.example .env

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–≤–æ–π —Ä–µ–¥–∞–∫—Ç–æ—Ä)
nano .env

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
chmod 600 .env
```

–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ .env:
```env
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ SSL –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
DOMAIN=https://your-domain.com
SSL_CERT_PATH=/etc/letsencrypt/live/your-domain.com/fullchain.pem
SSL_KEY_PATH=/etc/letsencrypt/live/your-domain.com/privkey.pem
SSL_CHAIN_PATH=/etc/letsencrypt/live/your-domain.com/chain.pem
WEBHOOK_SECRET=your_secure_random_string_here

# –û–±–Ω–æ–≤–∏—Ç–µ URL –¥–ª—è HTTPS
FRONTEND_URL=https://your-domain.com
API_BASE_URL=https://your-domain.com
```

#### 2.3.6 –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

1. **–ë–∞–∑–æ–≤—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏:**
   ```bash
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞
   curl -I http://your-domain.com
   
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ HTTPS
   curl -I https://your-domain.com
   
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
   openssl s_client -connect your-domain.com:443 -servername your-domain.com
   ```

2. **SSL Labs —Ç–µ—Å—Ç:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ https://www.ssllabs.com/ssltest/
   - –í–≤–µ–¥–∏—Ç–µ –≤–∞—à –¥–æ–º–µ–Ω
   - –î–æ–∂–¥–∏—Ç–µ—Å—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ç–µ—Å—Ç–∞ (–æ–±—ã—á–Ω–æ 2-3 –º–∏–Ω—É—Ç—ã)
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ—Ü–µ–Ω–∫–∞ A –∏–ª–∏ A+

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:**
   ```bash
   curl -I https://your-domain.com | grep -i "strict\|content\|frame\|xss\|sniff"
   ```

#### 2.3.7 –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

1. **–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è:**
   ```bash
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
   sudo certbot certificates
   sudo tail -f /var/log/letsencrypt/letsencrypt.log
   ```

2. **–ü—Ä–æ–±–ª–µ–º—ã —Å nginx:**
   ```bash
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—à–∏–±–æ–∫
   sudo nginx -t
   sudo tail -f /var/log/nginx/error.log
   ```

3. **SSL –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
   ```bash
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
   sudo ls -la /etc/letsencrypt/live/
   sudo ls -la /etc/letsencrypt/archive/
   ```

‚ö†Ô∏è **–í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã:**
1. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
3. –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –æ—Ü–µ–Ω–∫—É SSL Labs
4. –û–±–Ω–æ–≤–ª—è–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é nginx –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

## 3. –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤

### 3.1 –†–∞—Å–ø–∞–∫—É–π—Ç–µ –∞—Ä—Ö–∏–≤
```bash
tar -xzf outtime-deploy.tar.gz -C public_html/
```

### 3.2 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤
```
public_html/
‚îú‚îÄ‚îÄ index.html          # –§—Ä–æ–Ω—Ç–µ–Ω–¥
‚îú‚îÄ‚îÄ assets/             # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ .htaccess           # Apache –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îî‚îÄ‚îÄ backend/            # Node.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
    ‚îú‚îÄ‚îÄ server.js
    ‚îú‚îÄ‚îÄ package.json
    ‚îú‚îÄ‚îÄ ecosystem.config.js
    ‚îî‚îÄ‚îÄ src/
```

## 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

### 4.1 –°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª
```bash
cd public_html/backend
cp env.production.example .env
```

### 4.2 –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
```env
DATABASE_URL=postgresql://username:password@localhost:5432/database_name
JWT_SECRET=your_super_secret_jwt_key_here
BOT_TOKEN=your_telegram_bot_token_here
NODE_ENV=production
PORT=3000
FRONTEND_URL=https://your-domain.com
```

## 5. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### 5.1 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
cd public_html/backend
pnpm install --production
```

### 5.2 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
node migrations/migrate.js
```

### 5.3 –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ PM2
```bash
pnpm run pm2:start
```

## 6. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Bot

### 6.1 Webhook URL
```
https://your-domain.com/bot/webhook
```

### 6.2 –ü—Ä–æ–≤–µ—Ä–∫–∞
–û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start` –±–æ—Ç—É

## 7. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### 7.1 API
```bash
curl https://your-domain.com/api/health
```

### 7.2 –§—Ä–æ–Ω—Ç–µ–Ω–¥
–û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ

## 8. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### 8.1 –õ–æ–≥–∏
```bash
cd public_html/backend
pnpm run pm2:logs
```

### 8.2 –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
```bash
pnpm run pm2:restart
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **SSL**: –í–∫–ª—é—á–∏—Ç–µ SSL –≤ ISPmanager
2. **–ü–æ—Ä—Ç—ã**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Ä—Ç 3000 –¥–æ—Å—Ç—É–ø–µ–Ω
3. **–ü—Ä–∞–≤–∞**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º
4. **–õ–æ–≥–∏**: –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## üÜò –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
pnpm run pm2:logs

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
cat .env

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å PM2
pm2 status
```

### API –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ .htaccess —Ñ–∞–π–ª
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–∫—Å–∏ –≤ ISPmanager

### –ü—Ä–æ–±–ª–µ–º—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ë–î 